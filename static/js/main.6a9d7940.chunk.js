(this["webpackJsonpvillager-pedia"]=this["webpackJsonpvillager-pedia"]||[]).push([[0],{32:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(10),r=a.n(c),s=(a(32),a(7)),i=a(22),o=a(0);var d=function(e){var t=e.src,a=e.alt,n=e.className,c=e.width,r=e.height,i=l.a.useState(!1),d=Object(s.a)(i,2),j=d[0],u=d[1],h=l.a.useState(!!t),b=Object(s.a)(h,2),p=b[0],m=b[1];return Object(o.jsxs)("div",{className:"smooth-image-wrapper",children:[p?Object(o.jsx)("img",{src:t,alt:a,className:"smooth-image ".concat(n," image-").concat(j?"visible":"hidden"),onLoad:function(){return u(!0)},width:c,height:r,onError:function(){return m(!1)}}):Object(o.jsx)("div",{className:"smooth-no-image",children:a}),p&&!j&&Object(o.jsx)("div",{className:"smooth-preloader",children:Object(o.jsx)("span",{className:"loader"})})]})};var j=function(e){return e.showModal?Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(i.a,{show:e.showModal,onHide:e.handleClose,size:"lg",centered:!0,children:[Object(o.jsx)(i.a.Header,{closeButton:!0,children:Object(o.jsx)("div",{className:"bubble-title",style:{backgroundColor:e.modalInfo["bubble-color"]},children:Object(o.jsx)(i.a.Title,{as:"h2",style:{color:e.modalInfo["text-color"]},children:e.modalInfo.name["name-"+e.language]})})}),Object(o.jsx)(i.a.Body,{children:Object(o.jsxs)("div",{className:"row justify-content-between",children:[Object(o.jsxs)("div",{className:"col-md-4 d-md-block d-none",children:[Object(o.jsx)(d,{src:e.modalInfo.image_uri,alt:e.modalInfo.name["name-"+e.language],className:"img-thumbnail mb-3 villager-thumbnail",width:"256",height:"256"}),Object(o.jsx)("q",{className:"d-block text-center mb-4 fst-italic",children:e.modalInfo.saying})]}),Object(o.jsx)("div",{className:"col-md-7 col-12",children:Object(o.jsxs)("dl",{children:[Object(o.jsx)("dt",{children:"Species"}),Object(o.jsx)("dd",{children:e.modalInfo.species}),Object(o.jsx)("dt",{children:"Personality"}),Object(o.jsx)("dd",{children:e.modalInfo.personality}),Object(o.jsx)("dt",{children:"Birthday"}),Object(o.jsx)("dd",{children:e.modalInfo["birthday-string"]}),Object(o.jsx)("dt",{children:"Catchphrase"}),Object(o.jsx)("dd",{children:e.modalInfo["catch-translations"]["catch-"+e.language]}),Object(o.jsx)("dt",{children:"Hobby"}),Object(o.jsx)("dd",{children:e.modalInfo.hobby})]})})]})})]})}):null},u=a(2),h=a(24),b=a(11),p=a(15),m=a(16),O=a(21),v=a(20),f=a(17),g=a(12),x=function(e){Object(O.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).sendData=function(e){n.props.parentCallback(e)},n.callbackFunction=function(e){n.sendData(e)},n.selectSort=function(e){"0"===e?n.sortFileName():"1"===e?n.sortAlph():"2"===e?n.sortAlph(!0):"3"===e?n.sortBirthday():"4"===e&&n.sortBirthday(!0),n.setState({sort:e})},n.sortAlph=function(e){var t=Object(b.a)(n.state.items);t.sort((function(e,t){return e.name["name-"+n.props.language].localeCompare(t.name["name-"+n.props.language])})),null!=e&&t.reverse(),n.setState({items:t})},n.sortFileName=function(){var e=Object(b.a)(n.state.items);e.sort((function(e,t){return e["file-name"].localeCompare(t["file-name"])})),n.setState({items:e})},n.sortBirthday=function(e){var t=Object(b.a)(n.state.items);t.sort((function(e,t){var a=Array.from(e.birthday.split("/").reverse(),Number),n=Array.from(t.birthday.split("/").reverse(),Number);return a[0]>n[0]||a[0]===n[0]&&a[1]>n[1]?1:a[0]<n[0]||a[0]===n[0]&&a[1]<n[1]?-1:0})),null!=e&&t.reverse(),n.setState({items:t})},n.filterBy=function(e,t){var a=JSON.parse(JSON.stringify(n.state.filters));a[e]=""===t?null:t,n.setState({filters:a})},n.setLanguage=function(e){n.props.callbackLanguage(e)},n.handleSearch=function(e){var t=e.target;n.setState({search:t.value})},n.state={error:null,isLoaded:!1,items:[],sort:"0",filters:{personality:null,gender:null,species:null,hobby:null},search:null},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://acnhapi.com/v1/villagers/").then((function(e){return e.json()})).then((function(t){for(var a=[],n=0,l=Object.keys(t);n<l.length;n++){var c=t[l[n]];a.push(c)}e.setState({isLoaded:!0,items:a})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.error,l=a.isLoaded,c=a.items,r=a.filters,s=a.search,i=Object.values(r),d=Object.keys(r),j=Object(b.a)(c),p=Object(b.a)(new Set(c.map((function(e){return e.species})))).sort((function(e,t){return e.localeCompare(t)})),m=[],O=Object(h.a)(p);try{for(O.s();!(e=O.n()).done;){var v=e.value;m.push(Object(o.jsx)("option",{value:v,children:v},v))}}catch(J){O.e(J)}finally{O.f()}var x,S=Object(b.a)(new Set(c.map((function(e){return e.personality})))).sort((function(e,t){return e.localeCompare(t)})),C=[],N=Object(h.a)(S);try{for(N.s();!(x=N.n()).done;){var I=x.value;C.push(Object(o.jsx)("option",{value:I,children:I},I))}}catch(J){N.e(J)}finally{N.f()}var k,w,F,B,L,A=Object(b.a)(new Set(c.map((function(e){return e.hobby})))).sort((function(e,t){return e.localeCompare(t)})),E=[],U=Object(h.a)(A);try{for(U.s();!(k=U.n()).done;){var D=k.value;E.push(Object(o.jsx)("option",{value:D,children:D},D))}}catch(J){U.e(J)}finally{U.f()}if(!i.every((function(e){return null===e})))for(var H=function(e){null!==i[e]&&(j=j.filter((function(t){return t[d[e]]===i[e]})))},P=0;P<i.length;P++)H(P);return s&&(j=j.filter((function(e){return e.name["name-"+t.props.language].toLowerCase().includes(s.toLowerCase())}))),n?Object(o.jsxs)("div",{children:["Error: ",n.message]}):l?Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(g.a,{controlId:"floatingInput",label:"Search",className:"mb-3",children:Object(o.jsx)(f.a.Control,{type:"text",value:null!==(w=this.state.search)&&void 0!==w?w:"",onChange:this.handleSearch})}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-md mb-2",children:Object(o.jsx)(g.a,{controlId:"sortBySelect",label:"Sort By",children:Object(o.jsxs)(f.a.Select,{"aria-label":"Sort by",onChange:function(e){return t.selectSort(e.target.value)},value:this.state.sort,children:[Object(o.jsx)("option",{value:"0",children:"Filename (A-Z)"}),Object(o.jsx)("option",{value:"1",children:"A-Z"}),Object(o.jsx)("option",{value:"2",children:"Z-A"}),Object(o.jsx)("option",{value:"3",children:"Birthday Ascending"}),Object(o.jsx)("option",{value:"4",children:"Birthday Descending"})]})})}),Object(o.jsx)("div",{className:"col-md mb-2",children:Object(o.jsx)(g.a,{controlId:"speciesFilter",label:"Species",children:Object(o.jsxs)(f.a.Select,{"aria-label":"Filter by Species",onChange:function(e){return t.filterBy("species",e.target.value)},value:null!==(F=this.state.filters.species)&&void 0!==F?F:"",children:[Object(o.jsx)("option",{value:"",children:"All Species"}),m]})})}),Object(o.jsx)("div",{className:"col-md mb-2",children:Object(o.jsx)(g.a,{controlId:"personalityFilter",label:"Personality",children:Object(o.jsxs)(f.a.Select,{"aria-label":"Filter by Personality",onChange:function(e){return t.filterBy("personality",e.target.value)},value:null!==(B=this.state.filters.personality)&&void 0!==B?B:"",children:[Object(o.jsx)("option",{value:"",children:"All Personalities"}),C]})})}),Object(o.jsx)("div",{className:"col-md mb-2",children:Object(o.jsx)(g.a,{controlId:"hobbyFilter",label:"Hobby",children:Object(o.jsxs)(f.a.Select,{"aria-label":"Filter by Hobby",onChange:function(e){return t.filterBy("hobby",e.target.value)},value:null!==(L=this.state.filters.hobby)&&void 0!==L?L:"",children:[Object(o.jsx)("option",{value:"",children:"All Hobbies"}),E]})})}),Object(o.jsx)("div",{className:"col-md-auto mb-2",children:Object(o.jsx)(g.a,{controlId:"langSetting",label:"Language",children:Object(o.jsxs)(f.a.Select,{"aria-label":"Set Language",onChange:function(e){return t.setLanguage(e.target.value)},value:this.props.language,children:[Object(o.jsx)("option",{value:"USen",children:"English (US)"}),Object(o.jsx)("option",{value:"EUde",children:"German"}),Object(o.jsx)("option",{value:"EUes",children:"Spanish (Spain)"}),Object(o.jsx)("option",{value:"USes",children:"Spanish (Mexico)"}),Object(o.jsx)("option",{value:"EUfr",children:"French"}),Object(o.jsx)("option",{value:"EUit",children:"Italian"}),Object(o.jsx)("option",{value:"EUnl",children:"Dutch"}),Object(o.jsx)("option",{value:"CNzh",children:"Simplified Chinese"}),Object(o.jsx)("option",{value:"TWzh",children:"Traditional Chinese"}),Object(o.jsx)("option",{value:"JPja",children:"Japanese"}),Object(o.jsx)("option",{value:"KRko",children:"Korean"}),Object(o.jsx)("option",{value:"EUru",children:"Russian"})]})})})]}),Object(o.jsx)("div",{className:"villager-index pt-5 mt-5 border-top",children:j.map((function(e,a){return Object(o.jsx)(y,Object(u.a)(Object(u.a)({},e),{},{parentCallback:t.callbackFunction,language:t.props.language}),a)}))})]}):Object(o.jsx)("div",{children:"Loading..."})}}]),a}(l.a.Component),y=function(e){Object(O.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).sendData=function(){e.props.parentCallback(e.props)},e}return Object(m.a)(a,[{key:"render",value:function(){return Object(o.jsxs)("div",{id:this.props.id,className:"villager-item ".concat(this.props.species," ").concat(this.props.personality),onClick:this.sendData,children:[Object(o.jsx)("div",{children:Object(o.jsx)(d,{src:this.props.icon_uri,alt:this.props.name["name-"+this.props.language],width:"128",height:"128"})}),Object(o.jsx)("h3",{children:this.props.name["name-"+this.props.language]})]})}}]),a}(l.a.Component),S=x;a(36);var C=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),r=Object(s.a)(c,2),i=r[0],d=r[1],u=Object(n.useState)("USen"),h=Object(s.a)(u,2),b=h[0],p=h[1];return Object(o.jsxs)("div",{className:"App pt-5",children:[Object(o.jsx)("h1",{className:"text-center display-3 mb-5",children:"ACNH Villagerpedia"}),Object(o.jsx)(j,{showModal:i,handleClose:function(){d(!1)},modalInfo:a,language:b}),Object(o.jsx)(S,{parentCallback:function(e){l(e),d(!0)},language:b,callbackLanguage:function(e){p(e)}})]})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then((function(t){var a=t.getCLS,n=t.getFID,l=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),l(e),c(e),r(e)}))};r.a.render(Object(o.jsx)(l.a.StrictMode,{children:Object(o.jsx)(C,{})}),document.getElementById("root")),N()}},[[37,1,2]]]);
//# sourceMappingURL=main.6a9d7940.chunk.js.map